<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원 가입</title>
    <link rel="stylesheet" href="css/signup.css">
</head>
<body>
    <div class="wrap">
        <div class="container">
             <h1>회원가입</h1>
        <form id="signup-form">
            <ul>
                <li>
                      <p>아이디(이메일)</p> 
          <input type="text" id="signup-username" name="signup-username" required  placeholder="이메일 주소"><button>중복 확인</button>
                </li>
        
            <li>
                <p>비밀번호</p> 
                <input type="password" id="signup-password" name="signup-password" required placeholder="비밀번호">
            </li>
            <li>
                <p>비밀번호 확인</p> 
                <input type="password" id="signup-password" name="signup-password" required placeholder="비밀번호 확인">
            </li>    
            <li>
                <p>휴대폰 번호</p> 
                <input type="tel" id="tel" name="tel" required placeholder="'-' 구분 없이 입력"><button>인증번호 전송</button>
            </li>    
            <li>
                <p>인증번호</p> 
                <input type="text" id="signup-code" name="signup-code" required placeholder="인증번호 입력">
            </li>    
        </ul>


        <input type="radio" name="gender" value="man">남
        <input type="radio" name="gender" value="woman">여
        <br>
      
        <label for="agree_all">
            <input type="checkbox" name="agree_all" id="agree_all">
            <span>모두 동의합니다</span>
          </label>
          <label for="agree">
            <input type="checkbox" name="agree" value="1">
            <span>이용약관 동의<strong>(필수)</strong></span>
          </label>
          <label for="agree">
            <input type="checkbox" name="agree" value="2">
            <span>개인정보 수집, 이용 동의<strong>(필수)</strong></span>
          </label>
          <label for="agree">
            <input type="checkbox" name="agree" value="3">
            <span>개인정보 이용 동의<strong>(필수)</strong></span>
          </label>
          <label for="agree">
            <input type="checkbox" name="agree" value="4">
            <span>이벤트, 혜택정보 수신동의<strong class="select_disable">(선택)</strong></span>
          </label>
          <button type="submit" class="submit-bt">내마음 봄 시작하기</button>
        </form>
        </div>
       
      </div>
      <script>
        const singupForm = document.getElementById("signup-form");
        singupForm.addEventListener("submit", function (e) {
          e.preventDefault();
          // 사용자가 입력한 사용자명과 비밀번호를 가져온다
          const usernameInput = document.getElementById("signup-username");
          const passwordInput = document.getElementById("signup-password");
          const userName = usernameInput.value.trim();
          const userPassword = passwordInput.value.trim();
          // 사용자명과 비밀번호의 유효성을 정규 표현식을 사용하여 확인합니다.
          const usernameRegex = /^[a-zA-Z0-9]+$/;
          const passwordRegex = /.{6,}/;
  
          if (!usernameRegex.test(userName)) {
            alert("사용자명은 영문자와 숫자로만 이루어져야 합니다.");
            return;
          }
  
          if (!passwordRegex.test(userPassword)) {
            alert("비밀번호는 최소 6자 이상이어야 합니다.");
            return;
          }
          const newUser = {
            username: userName,
            password: userPassword,
          };
          // 로컬스토리지에 사용자 정보를 저장합니다.
          // 이전에 로컬 스토리지에 저장된 사용자 정보를 가져오기 위해
          //  localStorage.getItem("users")를 사용합니다.
          // 만약 사용자 정보가 없다면 빈 배열([])을 기본 값으로 사용
          const users = JSON.parse(localStorage.getItem("users")) || [];
          // 새로운 사용자 객체 (newUser)를 이전 사용자 정보 배열에 추가
          users.push(newUser);
          // 사용자 정보 배열을 JSON형식으로 문자열화하고, 이를 로컬스토리지에 "users"라는 키로 저장
          localStorage.setItem("users", JSON.stringify(users));
          alert("가입이 완료! 로그인페이지로 이동");
          window.location.href = "login.html";
        });
        // 동의 모두선택 / 해제
const agreeChkAll = document.querySelector('input[name=agree_all]');
    agreeChkAll.addEventListener('change', (e) => {
    let agreeChk = document.querySelectorAll('input[name=agree]');
    for(let i = 0; i < agreeChk.length; i++){
      agreeChk[i].checked = e.target.checked;
    }
});
      </script>
</body>
</html>